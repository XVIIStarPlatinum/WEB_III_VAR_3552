<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Lab3_XVIIstarPt_table</title>
    <link rel="shortcut icon" href="assets/img/injury_logo.png" type="image/x-icon"/>
    <link rel="stylesheet" href="assets/css/transition.css" type="text/css"/>
    <link rel="stylesheet" href="assets/css/injury_blue.css" type="text/css"/>
</h:head>

<h:body style="padding: 0; margin: 0;">
    <div class="container">
        <div id="prologue-container">
            <p><h:link outcome="goToIndex">Лабораторная работа №3</h:link></p>
        </div>
        <div class="header">
            <h:link class="title" outcome="goToIndex">INJURY</h:link>
            <div class="clock">
                <div class="bar-seconds"></div>
                <div class="number-hours"></div>
                <div class="hands-box">
                    <div class="hand hours"><i></i></div>
                    <div class="hand minutes"><i></i></div>
                    <div class="hand seconds"><i></i></div>
                </div>
            </div>
            <div class="text-injury">
                <h4>Болорболд Аригуун</h4>
                <h4>P3211</h4>
                <h4>Вариант 3552</h4>
            </div>
            <div class="buttons">
                <button class="header-button" onclick="changeTheme()"><p>ТЕМА</p></button>
            </div>

        </div>
        <div id="div_canvas" style="display: flex">
            <canvas id="canvas" width="450px" height="450px">

            </canvas>
        </div>

        <div id="div_form" style="display: flex">
            <h:form id="form" prependId="false">
                <h1>X [-5; 3]</h1>
                <h3 class="p_input_x">
                    <h:commandLink value="-5" styleClass="#{XBean.x == -5 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(-5)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="-4" styleClass="#{XBean.x == -4 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(-4)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="-3" styleClass="#{XBean.x == -3 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(-3)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="-2" styleClass="#{XBean.x == -2 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(-2)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="-1" styleClass="#{XBean.x == -1 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(-1)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="0" styleClass="#{XBean.x == 0 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(0)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="1" styleClass="#{XBean.x == 1 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(1)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="2" styleClass="#{XBean.x == 2 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(2)}" onevent="handleClickX"/>
                    </h:commandLink>

                    <h:commandLink value="3" styleClass="#{XBean.x == 3 ? 'button_input_x active' : 'button_input_x'}">
                        <f:ajax listener="#{XBean.setX(3)}" onevent="handleClickX"/>
                    </h:commandLink>
                </h3>
                <h1>Y[-5; 3]</h1>
                <h3>
                    <h:inputText styleClass="input_y" pt:placeholder="1.999" required="true"
                                 value="#{YBean.y}" converter="com.CommaToDotConverter">
                        <f:validateLongRange minimum="-5" maximum="3"/>
                    </h:inputText>
                </h3>
                <h1>R[1; 3 step=0,5]</h1>
                <h3 class="p_input_r">
                    <h:commandLink value="1" styleClass="#{RBean.r == 1 ? 'button_input_r active' : 'button_input_r'}">
                        <f:ajax listener="#{RBean.setR(1)}" onevent="handleClickR"/>
                    </h:commandLink>

                    <h:commandLink value="1.5" styleClass="#{RBean.r == 1.5 ? 'button_input_r active' : 'button_input_r'}">
                        <f:ajax listener="#{RBean.setR(1.5)}" onevent="handleClickR"/>
                    </h:commandLink>

                    <h:commandLink value="2" styleClass="#{RBean.r == 2 ? 'button_input_r active' : 'button_input_r'}">
                        <f:ajax listener="#{RBean.setR(2)}" onevent="handleClickR"/>
                    </h:commandLink>

                    <h:commandLink value="2.5" styleClass="#{RBean.r == 2.5 ? 'button_input_r active' : 'button_input_r'}">
                        <f:ajax listener="#{RBean.setR(2.5)}" onevent="handleClickR"/>
                    </h:commandLink>

                    <h:commandLink value="3" styleClass="#{RBean.r == 3 ? 'button_input_r active' : 'button_input_r'}">
                        <f:ajax listener="#{RBean.setR(3)}" onevent="handleClickR"/>
                    </h:commandLink>
                </h3>
                <h3>
                    <h:commandButton value="Отправить форму">
                        <f:ajax listener="#{ResultsControllerBean.addResult(XBean.x, YBean.y, RBean.r)}" render="@form results-table" execute="form"
                                onevent="handleSubmit"/>
                    </h:commandButton>
                    <h:commandButton value="Очистить">
                        <f:ajax listener="#{ResultsControllerBean.clearResults}" render="@form results-table" execute="form"
                                onevent="handleClear"/>
                    </h:commandButton>
                </h3>

                <p class="error-message">

                </p>
            </h:form>
        </div>
    <div id="div_table" style="display: block">
        <h:panelGroup id="tablePanel">
        <h:dataTable id="dataTable" value="#{ResultsControllerBean.results}" var="result"
                     styleClass="attemptsTable"
                     headerClass="employeeTableHeader"
                     rowClasses="employeeTableOddRow,employeeTableEvenRow">

            <h:column>
                <f:facet name="header">X</f:facet>
                <h:outputText value="#{result.x}"/>

            </h:column>

            <h:column>
                <f:facet name="header">Y</f:facet>
                <h:outputText value="#{result.y}"/>

            </h:column>

            <h:column>
                <f:facet name="header">R</f:facet>
                <h:outputText value="#{result.r}"/>
            </h:column>

            <h:column>
                <f:facet name="header">isHit</f:facet>
                <h:outputText value="#{result.hitResult}"/>
            </h:column>
        </h:dataTable>
        </h:panelGroup>
        <h:form id="update-radius">
            <h:inputHidden id="radius" value="#{RBean.r}"/>
            <h:commandButton id="updateCanvas" styleClass="hidden">
                <f:ajax execute="@form"
                        listener="#{ResultsControllerBean.updateCanvas(RBean.r)}"
                        render="@form results-table"/>
            </h:commandButton>
        </h:form>
        <div class="footer" style="display: inline">
            <h1>XVIIstarPt_ | MMXXIV</h1>
        </div>
    </div>
    </div>
    <script src="assets/js/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="assets/js/injury_index_script.js" type="text/javascript"></script>
    <script src="assets/js/injury_table_script.js" type="text/javascript"></script>
</h:body>

</html>